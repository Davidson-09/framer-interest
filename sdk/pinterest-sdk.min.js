/**
 * Pinterest SDK - Minified Version
 * @version 1.0.0
 */
!function(t){"use strict";class e{constructor(t={}){this.config={apiBaseUrl:"https://framer-interest.vercel.app",pinterestTokenCookieName:"pinterest_token",...t},this.isInitialized=!1,this.isAuthenticated=!1}async init(){try{return this.isAuthenticated=await this.verifyAuthentication(),this.isInitialized=!0,!0}catch(t){return console.error("Failed to initialize Pinterest SDK:",t),!1}}login(t=window.location.href){const e=encodeURIComponent(t);window.location.href=`${this.config.apiBaseUrl}/api/auth/login?returnTo=${e}`}isUserAuthenticated(){return this.isAuthenticated}handleCallback(t="/dashboard",e="/login?error=pinterest_auth_failed"){const i=this._getCookie(this.config.pinterestTokenCookieName);return this.isAuthenticated=!!i,this.isAuthenticated?(console.log("Pinterest authentication successful"),window.location.href=t):(console.error("Pinterest authentication failed"),window.location.href=e),this.isAuthenticated}async verifyAuthentication(t=null){try{let e=`${this.config.apiBaseUrl}/api/auth/verify`;t&&(e+=`?access_token=${encodeURIComponent(t)}`);const i=await fetch(e,{method:"GET",credentials:"include"});return(await i.json()).isAuthenticated}catch(t){return console.error("Error verifying authentication:",t),!1}}async fetchPins(t=null){try{if(!this.isInitialized&&await this.init(),t){const e=await this.verifyAuthentication(t);if(!e)throw new Error("Invalid or expired access token")}else if(!this.isAuthenticated)throw new Error("User is not authenticated with Pinterest");let e=`${this.config.apiBaseUrl}/api/getPins`;t&&(e+=`?access_token=${encodeURIComponent(t)}`);const i=await fetch(e,{method:"GET",credentials:"include"});if(!i.ok)throw new Error(`Failed to fetch pins: ${i.status} ${i.statusText}`);const n=await i.json();return n.pins||[]}catch(t){throw console.error("Error fetching pins:",t),t}}_getCookie(t){const e=`; ${document.cookie}`;const i=e.split(`; ${t}=`);if(i.length===2)return i.pop().split(";").shift();return null}}"undefined"!=typeof exports?t.exports=e:"undefined"!=typeof module&&module.exports?module.exports=e:"undefined"!=typeof window&&(window.PinterestSDK=e)}(this);
